{"last_node_id":285,"last_link_id":321,"nodes":[{"id":187,"type":"PreviewImage","pos":[4830,1960],"size":{"0":210,"1":246},"flags":{},"order":78,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":218}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":188,"type":"PreviewImage","pos":[4820,2260],"size":{"0":210,"1":246},"flags":{},"order":87,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":219}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":189,"type":"SplitImageWithAlpha","pos":[4160,1970],"size":{"0":185.10531616210938,"1":46},"flags":{},"order":70,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":220,"label":"product"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[221,276],"slot_index":0,"shape":3},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"SplitImageWithAlpha"}},{"id":190,"type":"ImageInvert","pos":[4380,1950],"size":{"0":140,"1":26},"flags":{},"order":73,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":221}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[277,315],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageInvert"}},{"id":191,"type":"ImageInvert","pos":[4590,2170],"size":{"0":140,"1":26},"flags":{},"order":82,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":222}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[280,316],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageInvert"}},{"id":192,"type":"PreviewImage","pos":[4850,2980],"size":{"0":210,"1":246},"flags":{},"order":80,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":223}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":193,"type":"SplitImageWithAlpha","pos":[4200,2680],"size":{"0":185.10531616210938,"1":46},"flags":{},"order":57,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":224,"label":"needDetail"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[225,226],"slot_index":0,"shape":3},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"SplitImageWithAlpha"}},{"id":194,"type":"ImageInvert","pos":[4420,2670],"size":{"0":140,"1":26},"flags":{},"order":60,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":225}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[282],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageInvert"}},{"id":195,"type":"ImageGaussianBlur","pos":[4190,2790],"size":{"0":210,"1":58},"flags":{},"order":61,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":226}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[281,283,285,287],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageGaussianBlur"},"widgets_values":[10]},{"id":196,"type":"Image Blend by Mask","pos":[5150,2250],"size":{"0":315,"1":98},"flags":{},"order":88,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":227},{"name":"image_b","type":"IMAGE","link":228},{"name":"mask","type":"IMAGE","link":229}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[230,288],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Blend by Mask"},"widgets_values":[1]},{"id":197,"type":"PreviewImage","pos":[5350,2390],"size":{"0":210,"1":246},"flags":{},"order":90,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":230}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":198,"type":"Reroute","pos":[870,1020],"size":[75,26],"flags":{},"order":47,"mode":0,"inputs":[{"name":"","type":"*","link":321}],"outputs":[{"name":"MASK","type":"MASK","links":[265]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":199,"type":"SaveImage","pos":[2100,250],"size":{"0":555.6214599609375,"1":868.3923950195312},"flags":{},"order":55,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":232}],"properties":{},"widgets_values":["Relight"]},{"id":200,"type":"MaskFromRGBCMYBW+","pos":[240,740],"size":{"0":315,"1":246},"flags":{},"order":33,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":233},{"name":"threshold_r","type":"FLOAT","link":234,"widget":{"name":"threshold_r"}},{"name":"threshold_g","type":"FLOAT","link":235,"widget":{"name":"threshold_g"}},{"name":"threshold_b","type":"FLOAT","link":236,"widget":{"name":"threshold_b"}}],"outputs":[{"name":"red","type":"MASK","links":null,"shape":3},{"name":"green","type":"MASK","links":null,"shape":3},{"name":"blue","type":"MASK","links":null,"shape":3},{"name":"cyan","type":"MASK","links":null,"shape":3},{"name":"magenta","type":"MASK","links":null,"shape":3},{"name":"yellow","type":"MASK","links":null,"shape":3},{"name":"black","type":"MASK","links":null,"shape":3},{"name":"white","type":"MASK","links":[296],"slot_index":7,"shape":3}],"properties":{"Node name for S&R":"MaskFromRGBCMYBW+"},"widgets_values":[0.15,0.15,0.15]},{"id":201,"type":"ImageDesaturate+","pos":[2890,910],"size":{"0":315,"1":82},"flags":{},"order":58,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":237,"label":"needDetail"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[238],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageDesaturate+"},"widgets_values":[1,"luminance (Rec.709)"]},{"id":202,"type":"FrequencySeparation","pos":[3260,900],"size":{"0":364.2786560058594,"1":78},"flags":{},"order":62,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":238}],"outputs":[{"name":"high_freq","type":"IMAGE","links":[307],"slot_index":0,"shape":3},{"name":"low_freq","type":"IMAGE","links":[240,308],"slot_index":1,"shape":3}],"properties":{"Node name for S&R":"FrequencySeparation"},"widgets_values":[3]},{"id":203,"type":"ImageBatch","pos":[3850,180],"size":{"0":210,"1":46},"flags":{},"order":68,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":239},{"name":"image2","type":"IMAGE","link":240}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[241],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageBatch"}},{"id":204,"type":"BatchAverageImage","pos":[3850,280],"size":{"0":315,"1":58},"flags":{},"order":72,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":241}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[242],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"BatchAverageImage"},"widgets_values":["mean"]},{"id":205,"type":"Image Blending Mode","pos":[3850,400],"size":{"0":315,"1":102},"flags":{},"order":76,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":242},{"name":"image_b","type":"IMAGE","link":243}],"outputs":[{"name":"image","type":"IMAGE","links":[244],"slot_index":0,"shape":3}],"title":"Restore Color (Blending Control)","properties":{"Node name for S&R":"Image Blending Mode"},"widgets_values":["color",0.4],"color":"#232","bgcolor":"#353"},{"id":206,"type":"Image Blending Mode","pos":[3850,540],"size":{"0":315,"1":102},"flags":{},"order":81,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":244},{"name":"image_b","type":"IMAGE","link":245}],"outputs":[{"name":"image","type":"IMAGE","links":[247],"slot_index":0,"shape":3}],"title":"Restore Hue (Blending Control)","properties":{"Node name for S&R":"Image Blending Mode"},"widgets_values":["hue",0.42],"color":"#232","bgcolor":"#353"},{"id":207,"type":"FrequencyCombination","pos":[3850,730],"size":{"0":218.39999389648438,"1":46},"flags":{},"order":83,"mode":0,"inputs":[{"name":"high_freq","type":"IMAGE","link":246},{"name":"low_freq","type":"IMAGE","link":247}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[248],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"FrequencyCombination"}},{"id":208,"type":"RemapImageRange","pos":[4310,330],"size":{"0":315,"1":106},"flags":{},"order":86,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":248}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[306],"slot_index":0,"shape":3}],"title":"Remap Image Range (Levels)","properties":{"Node name for S&R":"RemapImageRange"},"widgets_values":[-0.06,1.1500000000000001,true],"color":"#232","bgcolor":"#353"},{"id":209,"type":"CheckpointLoaderSimple","pos":[1320,90],"size":{"0":432.1139831542969,"1":98},"flags":{},"order":0,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[262],"slot_index":0},{"name":"CLIP","type":"CLIP","links":[311,317],"slot_index":1},{"name":"VAE","type":"VAE","links":[254,264,269,273],"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["SD1.5/epicrealism_naturalSinRC1VAE.safetensors"]},{"id":210,"type":"MaskToImage","pos":[2940,2060],"size":{"0":210,"1":26},"flags":{},"order":30,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":249,"label":"mask"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[304],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":211,"type":"MaskPreview+","pos":[3210,1930],"size":{"0":277.9461669921875,"1":325.1985778808594},"flags":{},"order":31,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":250}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":212,"type":"Images to RGB","pos":[2930,2320],"size":{"0":210,"1":26},"flags":{},"order":63,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":251}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[220],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Images to RGB"}},{"id":213,"type":"ImpactGaussianBlurMask","pos":[2860,1920],"size":{"0":315,"1":82},"flags":{},"order":1,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":null,"label":"productMask"}],"outputs":[{"name":"MASK","type":"MASK","links":[249,250],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[30,10],"color":"#322","bgcolor":"#533"},{"id":215,"type":"Note","pos":[2870,1720],"size":{"0":308.3841552734375,"1":83.05235290527344},"flags":{},"order":26,"mode":4,"properties":{"text":""},"widgets_values":["RelightBlend A"],"color":"#233","bgcolor":"#355"},{"id":216,"type":"Reroute","pos":[2538,1973],"size":[82,26],"flags":{},"order":56,"mode":0,"inputs":[{"name":"","type":"*","link":252}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[224,237,303]}],"properties":{"showOutputText":true,"horizontal":false}},{"id":217,"type":"VAEDecode","pos":[1730,720],"size":{"0":204.3507537841797,"1":51.13043212890625},"flags":{},"order":54,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":253},{"name":"vae","type":"VAE","link":254,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[232,252],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":218,"type":"KSampler","pos":[1390,680],"size":{"0":309.5551452636719,"1":522.2451782226562},"flags":{},"order":53,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":255,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":256,"slot_index":1},{"name":"negative","type":"CONDITIONING","link":257,"slot_index":2},{"name":"latent_image","type":"LATENT","link":258},{"name":"cfg","type":"FLOAT","link":259,"widget":{"name":"cfg"}},{"name":"denoise","type":"FLOAT","link":260,"widget":{"name":"denoise"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[253],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[0,"fixed",20,2,"euler","normal",0.9]},{"id":219,"type":"MaskToImage","pos":[1200,1450],"size":{"0":188.6383819580078,"1":26},"flags":{},"order":50,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":261}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[263,266],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":220,"type":"LoadAndApplyICLightUnet","pos":[1330,250],"size":{"0":307.7776794433594,"1":58},"flags":{},"order":27,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":262}],"outputs":[{"name":"MODEL","type":"MODEL","links":[255],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"LoadAndApplyICLightUnet"},"widgets_values":["iclight_sd15_fc.safetensors"]},{"id":221,"type":"VAEEncode","pos":[1110,930],"size":{"0":210,"1":46},"flags":{},"order":51,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":263},{"name":"vae","type":"VAE","link":264,"slot_index":1}],"outputs":[{"name":"LATENT","type":"LATENT","links":[258],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":222,"type":"GrowMaskWithBlur","pos":[850,1620],"size":{"0":315,"1":246},"flags":{},"order":48,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":265}],"outputs":[{"name":"mask","type":"MASK","links":[274],"slot_index":0,"shape":3},{"name":"mask_inverted","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[0,0,true,false,28.1,1,1,false]},{"id":223,"type":"PreviewImage","pos":[1190,1520],"size":{"0":240.47509765625,"1":318.835205078125},"flags":{},"order":52,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":266}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":224,"type":"ICLightConditioning","pos":[930,700],"size":{"0":342.5999755859375,"1":138},"flags":{},"order":44,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":267,"label":"positive"},{"name":"negative","type":"CONDITIONING","link":268,"label":"negative"},{"name":"vae","type":"VAE","link":269},{"name":"foreground","type":"LATENT","link":270},{"name":"opt_background","type":"LATENT","link":null},{"name":"multiplier","type":"FLOAT","link":271,"widget":{"name":"multiplier"},"label":"multiplier"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[256],"slot_index":0,"shape":3},{"name":"negative","type":"CONDITIONING","links":[257],"slot_index":1,"shape":3},{"name":"empty_latent","type":"LATENT","links":[],"slot_index":2,"shape":3}],"properties":{"Node name for S&R":"ICLightConditioning"},"widgets_values":[0.15]},{"id":225,"type":"VAEEncode","pos":[930,610],"size":{"0":210,"1":46},"flags":{},"order":34,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":272,"slot_index":0},{"name":"vae","type":"VAE","link":273,"slot_index":1}],"outputs":[{"name":"LATENT","type":"LATENT","links":[270],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":226,"type":"RemapMaskRange","pos":[850,1470],"size":{"0":315,"1":82},"flags":{},"order":49,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":274},{"name":"max","type":"FLOAT","link":275,"widget":{"name":"max"}}],"outputs":[{"name":"mask","type":"MASK","links":[261],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"RemapMaskRange"},"widgets_values":[0,2]},{"id":227,"type":"Note","pos":[850,1340],"size":{"0":210,"1":61.34762191772461},"flags":{},"order":2,"mode":0,"properties":{"text":""},"widgets_values":["Regulate light intensity here.\nMAX = 1 is max light intensity."],"color":"#432","bgcolor":"#653"},{"id":228,"type":"Note","pos":[1740,590],"size":{"0":229.66082763671875,"1":65.36282348632812},"flags":{},"order":3,"mode":0,"properties":{"text":""},"widgets_values":["Tested with CFG between 2 and 3"],"color":"#432","bgcolor":"#653"},{"id":229,"type":"Note","pos":[3660,2730],"size":{"0":399.2240295410156,"1":277.6108093261719},"flags":{},"order":4,"mode":4,"properties":{"text":""},"widgets_values":["Thanks to the amazing u/Powered_JJ on Reddit, whom I have to thank for being open to collaborate with me on this, we now have a native Frequency Separation workflow inside of comfyUI.\n\nThis group eliminates the need for either color correcting and blending the detail area, or using Frequency Separation in Photoshop.\nSimply mask the detail area you'd like to keep from the original image, and the relit image will be re-processed with a high frequency layer that is the blended result of the high frequency layer of the original image (for the masked area) and the high frequency layer of the generated image (for the areas that you don't care about having different details). \n\nOnce again, thanks u/Powered_JJ"],"color":"#432","bgcolor":"#653"},{"id":230,"type":"Note","pos":[5880,2560],"size":{"0":251.81761169433594,"1":88.38092803955078},"flags":{},"order":5,"mode":4,"properties":{"text":""},"widgets_values":["Blended image with finer details from the original image and new lighting from the generated image"],"color":"#432","bgcolor":"#653"},{"id":231,"type":"ImageGaussianBlur","pos":[4180,2070],"size":{"0":210,"1":58},"flags":{},"order":74,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":276}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[218,278,279],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageGaussianBlur"},"widgets_values":[10]},{"id":232,"type":"Image Blending Mode","pos":[4560,2000],"size":{"0":221.88836669921875,"1":102},"flags":{},"order":79,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":277},{"name":"image_b","type":"IMAGE","link":278}],"outputs":[{"name":"image","type":"IMAGE","links":[222],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Blending Mode"},"widgets_values":["add",0.5]},{"id":233,"type":"Image Blending Mode","pos":[4530,2260],"size":{"0":210,"1":102},"flags":{},"order":84,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":279},{"name":"image_b","type":"IMAGE","link":280}],"outputs":[{"name":"image","type":"IMAGE","links":[219,228],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Blending Mode"},"widgets_values":["add",1]},{"id":234,"type":"PreviewImage","pos":[4860,2650],"size":{"0":210,"1":246},"flags":{},"order":65,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":281}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":235,"type":"Image Blending Mode","pos":[4590,2670],"size":{"0":221.88836669921875,"1":102},"flags":{},"order":66,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":282},{"name":"image_b","type":"IMAGE","link":283}],"outputs":[{"name":"image","type":"IMAGE","links":[284],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Blending Mode"},"widgets_values":["add",0.5]},{"id":236,"type":"ImageInvert","pos":[4630,2840],"size":{"0":140,"1":26},"flags":{},"order":71,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":284}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[286],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageInvert"}},{"id":237,"type":"Image Blending Mode","pos":[4600,2950],"size":{"0":210,"1":102},"flags":{},"order":75,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":285},{"name":"image_b","type":"IMAGE","link":286}],"outputs":[{"name":"image","type":"IMAGE","links":[223,227],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Blending Mode"},"widgets_values":["add",1]},{"id":238,"type":"Image Blending Mode","pos":[5490,2040],"size":{"0":315,"1":102},"flags":{},"order":91,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":287},{"name":"image_b","type":"IMAGE","link":288}],"outputs":[{"name":"image","type":"IMAGE","links":[289,314],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Blending Mode"},"widgets_values":["add",0.65]},{"id":239,"type":"Image Levels Adjustment","pos":[5490,2230],"size":{"0":315,"1":106},"flags":{},"order":92,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":289}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[293,295],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Levels Adjustment"},"widgets_values":[83,1,172]},{"id":240,"type":"Note","pos":[4160,2190],"size":{"0":251.81761169433594,"1":88.38092803955078},"flags":{},"order":6,"mode":4,"properties":{"text":""},"widgets_values":["Generate Frequency Separation layers for original image"],"color":"#432","bgcolor":"#653"},{"id":241,"type":"Note","pos":[4190,2900],"size":{"0":251.81761169433594,"1":88.38092803955078},"flags":{},"order":7,"mode":4,"properties":{"text":""},"widgets_values":["Generate Frequency Separation layers for relit image"],"color":"#432","bgcolor":"#653"},{"id":242,"type":"Note","pos":[5160,2050],"size":{"0":304.7122497558594,"1":118.9118423461914},"flags":{},"order":8,"mode":4,"properties":{"text":""},"widgets_values":["Generate High Frequency composite layer, with details from the original image blended into the high frequency layer of the relit image based on the masked area of the preview bridge node of the relit image"],"color":"#432","bgcolor":"#653"},{"id":243,"type":"Note","pos":[5590,2380],"size":{"0":210,"1":65.24028015136719},"flags":{},"order":9,"mode":4,"properties":{"text":""},"widgets_values":["Blend HF and LF layers"],"color":"#432","bgcolor":"#653"},{"id":244,"type":"ImpactGaussianBlurMask","pos":[3570,1930],"size":{"0":315,"1":82},"flags":{},"order":10,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":null,"label":"productMask"}],"outputs":[{"name":"MASK","type":"MASK","links":[292],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[40,16.7]},{"id":245,"type":"MaskToImage","pos":[3660,2200],"size":{"0":210,"1":26},"flags":{},"order":39,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":291}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[229],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":246,"type":"GrowMask","pos":[3580,2060],"size":{"0":315,"1":82},"flags":{},"order":32,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":292}],"outputs":[{"name":"MASK","type":"MASK","links":[291],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"GrowMask"},"widgets_values":[-15,true]},{"id":247,"type":"Note","pos":[3650,2410],"size":{"0":245.93186950683594,"1":151.14096069335938},"flags":{},"order":11,"mode":4,"properties":{"text":""},"widgets_values":["Mask the details area you wish to retain from the original image in the Preview Bridge node from the relight group, or use the mask from the segment anything nodes\n\nThe mask goes into the Blend Image by mask node in the Blend High Frequency Layers subgroup"],"color":"#432","bgcolor":"#653"},{"id":248,"type":"Note","pos":[5130,2390],"size":{"0":210,"1":134.56146240234375},"flags":{},"order":12,"mode":4,"properties":{"text":""},"widgets_values":["Mask (either from SAM's convert mask to image or from the above Convert Mask to Image node descending from the preview bridge node of the relight group) goes here"],"color":"#432","bgcolor":"#653"},{"id":249,"type":"SaveImage","pos":[5890,2710],"size":{"0":382.3623352050781,"1":634.7005615234375},"flags":{},"order":94,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":293}],"properties":{},"widgets_values":["RelightBlend"]},{"id":250,"type":"MathExpression|pysssss","pos":[1000,540],"size":{"0":270.3161926269531,"1":116.0002212524414},"flags":{"collapsed":true},"order":37,"mode":0,"inputs":[{"name":"a","type":"INT,FLOAT,IMAGE,LATENT","link":294},{"name":"b","type":"INT,FLOAT,IMAGE,LATENT","link":null},{"name":"c","type":"INT,FLOAT,IMAGE,LATENT","link":null}],"outputs":[{"name":"INT","type":"INT","links":null,"shape":3},{"name":"FLOAT","type":"FLOAT","links":[271],"slot_index":1,"shape":3}],"properties":{"Node name for S&R":"MathExpression|pysssss"},"widgets_values":["1 - a"]},{"id":251,"type":"PlaySound|pysssss","pos":[6180,2550],"size":{"0":210,"1":107.9781494140625},"flags":{},"order":95,"mode":4,"inputs":[{"name":"any","type":"*","link":295}],"outputs":[{"name":"*","type":"*","links":null,"shape":6}],"properties":{"Node name for S&R":"PlaySound|pysssss"},"widgets_values":["always",0.5,"notify.mp3"]},{"id":252,"type":"Note","pos":[530,350],"size":{"0":320.9671936035156,"1":118.82423400878906},"flags":{},"order":13,"mode":0,"properties":{"text":""},"widgets_values":["\bLight Effect 가 높을 수록 light image 를 더 잘 따라감\n\n높을수록\n- 부드러워짐\n- 실사 같은 형태\n\n권장: 0.79 ~ 0.85"],"color":"#432","bgcolor":"#653"},{"id":253,"type":"MaskPreview+","pos":[570,730],"size":{"0":210,"1":246},"flags":{},"order":40,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":296}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":254,"type":"DF_Float","pos":[230,1040],"size":{"0":315,"1":58},"flags":{},"order":14,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[234,235,236],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"DF_Float"},"widgets_values":[0.35000000000000003]},{"id":255,"type":"Reroute","pos":[50,340],"size":[82,26],"flags":{},"order":15,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"IMAGE","type":"*","links":[233,272,300,320],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":256,"type":"LightSource","pos":[470,1310],"size":{"0":315,"1":170},"flags":{},"order":41,"mode":0,"inputs":[{"name":"multiplier","type":"FLOAT","link":297,"slot_index":0,"widget":{"name":"multiplier"}},{"name":"width","type":"INT","link":298,"widget":{"name":"width"}},{"name":"height","type":"INT","link":299,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[301,312],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"LightSource"},"widgets_values":["Left Light",512,"#FFFFFF","#000000","#FFFFFF",512,1]},{"id":257,"type":"FloatConstant","pos":[230,1190],"size":{"0":210,"1":58},"flags":{},"order":16,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[297],"slot_index":0,"shape":3}],"title":"LightMultiplier","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[1],"color":"#232","bgcolor":"#353"},{"id":258,"type":"DF_Get_image_size","pos":[230,1330],"size":{"0":210,"1":46},"flags":{},"order":35,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":300}],"outputs":[{"name":"WIDTH","type":"INT","links":[298],"slot_index":0,"shape":3},{"name":"HEIGHT","type":"INT","links":[299],"slot_index":1,"shape":3}],"properties":{"Node name for S&R":"DF_Get_image_size"}},{"id":259,"type":"PreviewImage","pos":[550,1560],"size":{"0":210,"1":246},"flags":{},"order":45,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":301}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":261,"type":"Note","pos":[150,350],"size":{"0":210,"1":99.96605682373047},"flags":{},"order":17,"mode":0,"properties":{"text":""},"widgets_values":["need 512 to relights"],"color":"#432","bgcolor":"#653"},{"id":262,"type":"Image Blend by Mask","pos":[2920,2170],"size":{"0":233.81829833984375,"1":98},"flags":{},"order":59,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":303},{"name":"image_b","type":"IMAGE","link":null,"label":"product"},{"name":"mask","type":"IMAGE","link":304,"label":"image"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[251,318],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"Image Blend by Mask"},"widgets_values":[1]},{"id":263,"type":"FrequencySeparation","pos":[3270,300],"size":{"0":354.32061767578125,"1":78},"flags":{},"order":36,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":320}],"outputs":[{"name":"high_freq","type":"IMAGE","links":[246,309],"slot_index":0,"shape":3},{"name":"low_freq","type":"IMAGE","links":[239,243,245,310],"slot_index":1,"shape":3}],"properties":{"Node name for S&R":"FrequencySeparation"},"widgets_values":[3]},{"id":264,"type":"SaveImage","pos":[4300,490],"size":{"0":674.4949951171875,"1":920.536865234375},"flags":{},"order":89,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":306}],"properties":{},"widgets_values":["RelightBlend"]},{"id":265,"type":"PreviewImage","pos":[3270,1050],"size":{"0":210,"1":246},"flags":{},"order":67,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":307}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":266,"type":"PreviewImage","pos":[3500,1060],"size":{"0":188.4567108154297,"1":263.0474548339844},"flags":{},"order":69,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":308}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":267,"type":"PreviewImage","pos":[3270,450],"size":{"0":201.22348022460938,"1":247.61578369140625},"flags":{},"order":42,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":309}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":268,"type":"PreviewImage","pos":[3500,450],"size":{"0":215.849365234375,"1":297.2862548828125},"flags":{},"order":43,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":310}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":269,"type":"BNK_CLIPTextEncodeAdvanced","pos":[870,120],"size":{"0":343.234375,"1":151.46910095214844},"flags":{},"order":28,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":311}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[267],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"BNK_CLIPTextEncodeAdvanced"},"widgets_values":["ray of lights","none","comfy"],"color":"#322","bgcolor":"#533"},{"id":270,"type":"Note","pos":[160,130],"size":{"0":210,"1":99.96605682373047},"flags":{},"order":18,"mode":0,"properties":{"text":""},"widgets_values":["relight"],"color":"#233","bgcolor":"#355"},{"id":271,"type":"Note","pos":[3290,120],"size":{"0":308.3841552734375,"1":83.05235290527344},"flags":{},"order":25,"mode":0,"properties":{"text":""},"widgets_values":["RelightBlend B - preserve product colors"],"color":"#233","bgcolor":"#355"},{"id":272,"type":"ImageToMask","pos":[580,1210],"size":{"0":210,"1":58},"flags":{"collapsed":false},"order":46,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":312}],"outputs":[{"name":"MASK","type":"MASK","links":[321],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":273,"type":"DF_Float","pos":[890,440],"size":{"0":315,"1":58},"flags":{},"order":19,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[294],"slot_index":0,"shape":3}],"title":"Light Effect (1 - multiplier)","properties":{"Node name for S&R":"DF_Float"},"widgets_values":[0.84],"color":"#322","bgcolor":"#533"},{"id":274,"type":"DF_Float","pos":[1390,430],"size":{"0":315,"1":58},"flags":{},"order":20,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[259],"slot_index":0,"shape":3}],"title":"lightCfg","properties":{"Node name for S&R":"DF_Float"},"widgets_values":[2.4],"color":"#322","bgcolor":"#533"},{"id":275,"type":"DF_Float","pos":[850,1240],"size":{"0":315,"1":58},"flags":{},"order":21,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[275],"slot_index":0,"shape":3}],"title":"lightIntensity","properties":{"Node name for S&R":"DF_Float"},"widgets_values":[1.02],"color":"#322","bgcolor":"#533"},{"id":276,"type":"DF_Float","pos":[1390,540],"size":{"0":315,"1":58},"flags":{},"order":22,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[313],"slot_index":0,"shape":3}],"title":"lightImageEffect","properties":{"Node name for S&R":"DF_Float"},"widgets_values":[0],"color":"#322","bgcolor":"#533"},{"id":277,"type":"MathExpression|pysssss","pos":[1390,640],"size":{"0":400,"1":200},"flags":{"collapsed":true},"order":38,"mode":0,"inputs":[{"name":"a","type":"INT,FLOAT,IMAGE,LATENT","link":313},{"name":"b","type":"INT,FLOAT,IMAGE,LATENT","link":null},{"name":"c","type":"INT,FLOAT,IMAGE,LATENT","link":null}],"outputs":[{"name":"INT","type":"INT","links":null,"shape":3},{"name":"FLOAT","type":"FLOAT","links":[260],"slot_index":1,"shape":3}],"properties":{},"widgets_values":["1 - a"]},{"id":278,"type":"Note","pos":[530,120],"size":{"0":320.9671936035156,"1":118.82423400878906},"flags":{},"order":23,"mode":0,"properties":{"text":""},"widgets_values":["ray of lights, sunlight, soft studio light"],"color":"#432","bgcolor":"#653"},{"id":279,"type":"Note","pos":[1740,430],"size":{"0":229.66082763671875,"1":65.36282348632812},"flags":{},"order":24,"mode":0,"properties":{"text":""},"widgets_values":["cfg - 높을 수록 밝고, 거칠어짐"],"color":"#432","bgcolor":"#653"},{"id":280,"type":"PreviewImage","pos":[5870,2070],"size":{"0":265.8665466308594,"1":387.9820861816406},"flags":{},"order":93,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":314}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":281,"type":"PreviewImage","pos":[4520,1620],"size":{"0":210,"1":246},"flags":{},"order":77,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":315}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":282,"type":"PreviewImage","pos":[4820,1640],"size":{"0":210,"1":246},"flags":{},"order":85,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":316}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":283,"type":"CLIPTextEncode","pos":[980,320],"size":{"0":232.53196716308594,"1":76},"flags":{},"order":29,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":317}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[268],"slot_index":0,"shape":3}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["desaturated, sepia, white"]},{"id":285,"type":"SaveImage","pos":[3220,2320],"size":{"0":319.1033630371094,"1":429.33111572265625},"flags":{},"order":64,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":318}],"properties":{},"widgets_values":["DetailBlend"]}],"links":[[218,231,0,187,0,"IMAGE"],[219,233,0,188,0,"IMAGE"],[220,212,0,189,0,"IMAGE"],[221,189,0,190,0,"IMAGE"],[222,232,0,191,0,"IMAGE"],[223,237,0,192,0,"IMAGE"],[224,216,0,193,0,"IMAGE"],[225,193,0,194,0,"IMAGE"],[226,193,0,195,0,"IMAGE"],[227,237,0,196,0,"IMAGE"],[228,233,0,196,1,"IMAGE"],[229,245,0,196,2,"IMAGE"],[230,196,0,197,0,"IMAGE"],[232,217,0,199,0,"IMAGE"],[233,255,0,200,0,"IMAGE"],[234,254,0,200,1,"FLOAT"],[235,254,0,200,2,"FLOAT"],[236,254,0,200,3,"FLOAT"],[237,216,0,201,0,"IMAGE"],[238,201,0,202,0,"IMAGE"],[239,263,1,203,0,"IMAGE"],[240,202,1,203,1,"IMAGE"],[241,203,0,204,0,"IMAGE"],[242,204,0,205,0,"IMAGE"],[243,263,1,205,1,"IMAGE"],[244,205,0,206,0,"IMAGE"],[245,263,1,206,1,"IMAGE"],[246,263,0,207,0,"IMAGE"],[247,206,0,207,1,"IMAGE"],[248,207,0,208,0,"IMAGE"],[249,213,0,210,0,"MASK"],[250,213,0,211,0,"MASK"],[251,262,0,212,0,"IMAGE"],[252,217,0,216,0,"*"],[253,218,0,217,0,"LATENT"],[254,209,2,217,1,"VAE"],[255,220,0,218,0,"MODEL"],[256,224,0,218,1,"CONDITIONING"],[257,224,1,218,2,"CONDITIONING"],[258,221,0,218,3,"LATENT"],[259,274,0,218,4,"FLOAT"],[260,277,1,218,5,"FLOAT"],[261,226,0,219,0,"MASK"],[262,209,0,220,0,"MODEL"],[263,219,0,221,0,"IMAGE"],[264,209,2,221,1,"VAE"],[265,198,0,222,0,"MASK"],[266,219,0,223,0,"IMAGE"],[267,269,0,224,0,"CONDITIONING"],[268,283,0,224,1,"CONDITIONING"],[269,209,2,224,2,"VAE"],[270,225,0,224,3,"LATENT"],[271,250,1,224,5,"FLOAT"],[272,255,0,225,0,"IMAGE"],[273,209,2,225,1,"VAE"],[274,222,0,226,0,"MASK"],[275,275,0,226,1,"FLOAT"],[276,189,0,231,0,"IMAGE"],[277,190,0,232,0,"IMAGE"],[278,231,0,232,1,"IMAGE"],[279,231,0,233,0,"IMAGE"],[280,191,0,233,1,"IMAGE"],[281,195,0,234,0,"IMAGE"],[282,194,0,235,0,"IMAGE"],[283,195,0,235,1,"IMAGE"],[284,235,0,236,0,"IMAGE"],[285,195,0,237,0,"IMAGE"],[286,236,0,237,1,"IMAGE"],[287,195,0,238,0,"IMAGE"],[288,196,0,238,1,"IMAGE"],[289,238,0,239,0,"IMAGE"],[291,246,0,245,0,"MASK"],[292,244,0,246,0,"MASK"],[293,239,0,249,0,"IMAGE"],[294,273,0,250,0,"INT,FLOAT,IMAGE,LATENT"],[295,239,0,251,0,"*"],[296,200,7,253,0,"MASK"],[297,257,0,256,0,"FLOAT"],[298,258,0,256,1,"INT"],[299,258,1,256,2,"INT"],[300,255,0,258,0,"IMAGE"],[301,256,0,259,0,"IMAGE"],[303,216,0,262,0,"IMAGE"],[304,210,0,262,2,"IMAGE"],[306,208,0,264,0,"IMAGE"],[307,202,0,265,0,"IMAGE"],[308,202,1,266,0,"IMAGE"],[309,263,0,267,0,"IMAGE"],[310,263,1,268,0,"IMAGE"],[311,209,1,269,0,"CLIP"],[312,256,0,272,0,"IMAGE"],[313,276,0,277,0,"INT,FLOAT,IMAGE,LATENT"],[314,238,0,280,0,"IMAGE"],[315,190,0,281,0,"IMAGE"],[316,191,0,282,0,"IMAGE"],[317,209,1,283,0,"CLIP"],[318,262,0,285,0,"IMAGE"],[320,255,0,263,0,"IMAGE"],[321,272,0,198,0,"*"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.9849732675807656,"offset":[-3327.239991543918,123.26285990446179]},"workspace_info":{"id":"6ro2AcpHujc4vdCIud4O7","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}